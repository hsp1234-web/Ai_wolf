# (ä¸­æ–‡å…§å®¹)

# Wolf_V5

## å°ˆæ¡ˆç›®æ¨™

æœ¬å°ˆæ¡ˆæ—¨åœ¨æ‰“é€ ä¸€å€‹åœ¨ Google Colaboratory (Colab) ç’°å¢ƒä¸­é‹è¡Œçš„ã€å…·æœ‰èŠå¤©å¼åœ–å½¢åŒ–ä»‹é¢çš„äººæ©Ÿå”åŒæ™ºæ…§åˆ†æžå¹³å°ã€‚å¹³å°å°‡ç”¨æ–¼ç³»çµ±æ€§åœ°è™•ç†ã€Œå–„ç”²ç‹¼aæ©Ÿæ™ºç”Ÿæ´»ã€ç´„150é€±çš„æ­·å²è²¼æ–‡ï¼Œè¼”åŠ©ä½¿ç”¨è€…å›žé¡§æ­·å²äº¤æ˜“æ©Ÿæœƒï¼Œä¸¦æœ€çµ‚ç”±ä½¿ç”¨è€…å°‡ç²¾ç…‰å…§å®¹æ‰‹å‹•æ•´ç†è‡³Googleæ–‡ä»¶ã€‚

### ðŸš€ å¿«é€Ÿé–‹å§‹ (Google Colab)

æˆ‘å€‘æä¾›äº†ä¸€å€‹æ¥µå…¶ç°¡å–®çš„ä¸€éµå•Ÿå‹•æ–¹å¼ï¼Œè®“æ‚¨å¯ä»¥ç›´æŽ¥åœ¨ Google Colab çš„å…è²»ç’°å¢ƒä¸­åŸ·è¡Œæœ¬å°ˆæ¡ˆã€‚

1.  é»žæ“Šä¸‹æ–¹çš„å¾½ç« ï¼Œå³å¯åœ¨ Colab ä¸­æ‰“é–‹æˆ‘å€‘çš„å°ˆæ¡ˆå•Ÿå‹•å™¨ï¼š

    [![åœ¨ Colab ä¸­æ‰“é–‹](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/hsp1234-web/wolfAI_v1/blob/main/run_in_colab.ipynb)

2.  ç­†è¨˜æœ¬è¼‰å…¥å¾Œï¼Œæ‚¨æœƒçœ‹åˆ°ä¸€å€‹ç¨‹å¼ç¢¼å„²å­˜æ ¼ã€‚**åœ¨é»žæ“ŠåŸ·è¡ŒæŒ‰éˆ•å‰ï¼Œæ‚¨å¯ä»¥å¾žè©²å„²å­˜æ ¼ä¸Šæ–¹çš„ä¸‹æ‹‰é¸å–®ä¸­é¸æ“‡åŸ·è¡Œæ¨¡å¼ï¼š**
    *   **æ­£å¸¸æ¨¡å¼**: é è¨­é¸é …ï¼Œç‚ºä¸€èˆ¬ä½¿ç”¨è€…è¨­è¨ˆï¼Œæä¾›æœ€ç©©å®šã€ç°¡æ½”çš„å•Ÿå‹•æµç¨‹ã€‚æ­¤æ¨¡å¼æœƒéš±è—è©³ç´°æŠ€è¡“æ—¥èªŒã€‚
    *   **é™¤éŒ¯æ¨¡å¼**: ç‚ºé–‹ç™¼è€…è¨­è¨ˆã€‚æ­¤æ¨¡å¼æœƒè¼¸å‡ºè©³ç´°çš„å®‰è£èˆ‡åŸ·è¡Œæ—¥èªŒï¼Œä¸¦åœ¨æœå‹™å•Ÿå‹•å¾Œè‡ªå‹•åŸ·è¡Œä¸€ç³»åˆ—ç³»çµ±å¥åº·æª¢æŸ¥ï¼ˆæ¶µè“‹å¾Œç«¯APIã€å‰ç«¯æœå‹™ã€æ ¸å¿ƒåŠŸèƒ½ç­‰ï¼‰ï¼Œæœ€å¾Œå°‡çµæžœæ‰“å°åœ¨æ—¥èªŒä¸­ã€‚é€™æœ‰åŠ©æ–¼å¿«é€Ÿå®šä½æ½›åœ¨å•é¡Œã€‚

3.  é¸æ“‡å¥½æ¨¡å¼å¾Œï¼Œé»žæ“Šå„²å­˜æ ¼å·¦å´çš„ **â–¶ï¸ åŸ·è¡ŒæŒ‰éˆ•**ã€‚

4.  è«‹ç¨å¾…å¹¾åˆ†é˜ï¼Œç³»çµ±å°‡è‡ªå‹•å®Œæˆæ‰€æœ‰å®‰è£èˆ‡è¨­å®šã€‚æˆåŠŸå¾Œï¼Œæœƒç›´æŽ¥é¡¯ç¤ºæ‚¨å¯ä»¥å…¬é–‹è¨ªå•çš„æœå‹™ç¶²å€ã€‚

**API é‡‘é‘°é…ç½®æç¤º (ç‚ºä½¿é™¤éŒ¯æ¨¡å¼ä¸‹çš„å¥åº·æª¢æŸ¥æ›´å®Œæ•´)ï¼š**
å¦‚æžœé¸æ“‡ã€Œé™¤éŒ¯æ¨¡å¼ã€ï¼Œç‚ºäº†ä½¿å…¶èƒ½å…¨é¢æ¸¬è©¦ API é‡‘é‘°çš„è®€å–å’Œå¤–éƒ¨æœå‹™çš„é€£é€šæ€§ (ä¾‹å¦‚ Google Gemini API, FRED API)ï¼Œå»ºè­°æ‚¨åœ¨ Colab çš„ã€Œå¯†é‘°ã€(Secrets Manager) ä¸­é å…ˆè¨­å®šå¥½ä»¥ä¸‹åç¨±çš„å¯†é‘°åŠå…¶å°æ‡‰å€¼ï¼š
*   `GEMINI_API_KEY`: æ‚¨çš„ Google Gemini API é‡‘é‘°ã€‚
*   `COLAB_FRED_API_KEY_FOR_TEST`: æ‚¨çš„ FRED API é‡‘é‘° (ç”¨æ–¼æ¸¬è©¦)ã€‚
*(å¦‚æžœå°ˆæ¡ˆæœªä¾†å¢žåŠ äº†å°å…¶ä»–éœ€é‡‘é‘°æœå‹™çš„æ¸¬è©¦ï¼Œä¹Ÿè«‹åœ¨æ­¤è™•åˆ—å‡º)*
å¦‚æžœæœªè¨­å®šé€™äº›å¯†é‘°ï¼Œé™¤éŒ¯æ¨¡å¼ä¸­çš„ç›¸é—œ API é€£é€šæ€§æ¸¬è©¦å¯èƒ½æœƒè¢«è·³éŽæˆ–æ¨™è¨˜ç‚ºè­¦å‘Šã€‚æ­£å¸¸æ¨¡å¼å•Ÿå‹•ä¸å—æ­¤å½±éŸ¿ï¼ˆé™¤éžæ‡‰ç”¨æœ¬èº«æ ¸å¿ƒåŠŸèƒ½å¿…é ˆä¾è³´é€™äº›é‡‘é‘°ï¼‰ã€‚

**ç–‘é›£æŽ’è§£ï¼š**
å¦‚æžœåŸ·è¡ŒéŽç¨‹ä¸­é¡¯ç¤ºã€Œæœå‹™å•Ÿå‹•å¤±æ•—ã€ï¼Œé€™é€šå¸¸æ˜¯ Colab ç’°å¢ƒçš„å¶ç™¼å•é¡Œã€‚è«‹ä¾ç…§ç­†è¨˜æœ¬è¼¸å‡ºä¸­çš„ä¸­æ–‡æç¤ºï¼Œé»žæ“Šé¸å–®ã€åŸ·è¡ŒéšŽæ®µã€‘->ã€ä¸­æ–·ä¸¦é‡æ–°å•Ÿå‹•åŸ·è¡ŒéšŽæ®µã€‘ï¼Œç„¶å¾Œå†æ¬¡é»žæ“ŠåŸ·è¡ŒæŒ‰éˆ•å³å¯è§£æ±ºã€‚

---




# (English Content)

# Wolf_V5

## Project Goal
This project aims to create an AI-assisted analysis platform running in Google Colaboratory (Colab). The platform, featuring a chat-based graphical interface, will systematically process approximately 150 weeks of historical posts from "å–„ç”²ç‹¼aæ©Ÿæ™ºç”Ÿæ´»" (ShanJiaLang's Witty Life). It will help users review historical trading opportunities, with the ultimate goal of users manually curating refined content into Google Docs.

### ðŸš€ Quick Start (Google Colab)

We offer an extremely simple one-click launch method, allowing you to run this project directly in Google Colab's free environment.

1.  Click the badge below to open our project launcher in Colab:

    [![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/hsp1234-web/wolfAI_v1/blob/main/run_in_colab.ipynb)

2.  Once the notebook loads, you will see a code cell. **Before clicking the run button, you can select the execution mode from the dropdown menu above this cell:**
    *   **Normal Mode**: The default option, designed for general users, providing the most stable and clean startup process. This mode hides detailed technical logs.
    *   **Debug Mode**: Designed for developers. This mode outputs detailed installation and execution logs, and after the services start, it automatically runs a series of system health checks (covering backend APIs, frontend services, core functionalities, etc.), printing the results in the log. This helps in quickly identifying potential issues.

3.  After selecting your mode, click the **â–¶ï¸ Run button** to the left of the cell.

4.  Please wait a few minutes for the system to automatically complete all installations and configurations. Upon success, a publicly accessible URL for the service will be displayed directly.

**API Key Configuration Tip (to ensure comprehensive Debug Mode health checks):**
If you select "Debug Mode," to enable it to fully test API key reading and connectivity to external services (e.g., Google Gemini API, FRED API), it is recommended to pre-configure the following secrets in Colab's Secrets Manager:
*   `GEMINI_API_KEY`: Your Google Gemini API key.
*   `COLAB_FRED_API_KEY_FOR_TEST`: Your FRED API key (for testing).
*(If the project adds tests for other key-dependent services in the future, please list them here too.)*
If these secrets are not set, related API connectivity tests in Debug Mode may be skipped or marked as warnings. Normal mode startup is not affected by this (unless the application's core functionality itself depends on these keys).

**Troubleshooting:**
If "Service startup failed" is displayed during execution, this is usually an occasional issue with the Colab environment. Please follow the Chinese prompts in the notebook output, click on the "Runtime" menu -> "Interrupt and restart runtime," and then click the run button again to resolve.


---

### Application Usage Guide

1.  **Set Your Gemini API Key (Important):**
    *   After the application launches, enter your Gemini API Key in the "API Settings" section of the sidebar. Using Colab Secrets Manager is highly recommended (see Appendix A below). The `app.py` is designed to preferentially load the key from a Colab Secret named `GEMINI_API_KEY`.
    *   AI analysis features will not work without a valid API Key.

2.  **Read Analysis File from Google Drive:**
    *   In the "Read Google Drive File" section of the sidebar, enter the path to your analysis file, relative to your Google Drive's `My Drive` (e.g., `wolfAI/my_report.txt` or `Colab_Data/another_report.txt`).
    *   **Date Parsing Tip:** For optimal market review by the AI, it's recommended that your text file includes a clear date identifier in the format `æ—¥æœŸï¼šYYYY-MM-DD` (Date: YYYY-MM-DD). The application will attempt to parse the base date from this identifier.
    *   Click "Read and Set as Current Analysis File."

3.  **Perform Initial AI Analysis (Includes Market Review):**
    *   Once a file is successfully read, an "AI Initial Analysis (Includes Market Review)" button will appear below the main chat area.
    *   Clicking this button will:
        *   Trigger the AI to perform a summary analysis of the text content (including "ShanJiaLang" core viewpoints, etc.).
        *   **Market Review:** Based on the date parsed from the file (or the current date if none is found), the AI will attempt to automatically fetch and display daily charts and data summaries for the Taiwan Weighted Index (`^TWII`), Nasdaq Composite (`^IXIC`), S&P 500 (`^GSPC`), Philadelphia Semiconductor Index (`^SOX`), and Nikkei 225 (`^N225`) for the week preceding the identified date. These charts and summaries will be displayed in the chat area as part of the AI's analysis.
        *   The `yfinance` package (used for fetching market data) is automatically installed by the `run_in_colab.ipynb` script.

4.  **Chat Interaction:**
    *   You can interact with the AI via the input box at the bottom of the chat area. Advanced chat commands (e.g., querying specific stock data) are planned for future development.

### Notes
*   The Colab Notebook must remain running for the application to be accessible.
*   If the Colab environment restarts, you will need to re-run the setup and launch cell(s) in `run_in_colab.ipynb`.
*   Code updates are primarily managed through GitHub.

---

## Viewing Application Logs

The application features built-in detailed logging to assist users and developers in tracking execution status and troubleshooting issues.

### How to View Logs

1.  **Location**: At the bottom of the application's main page, you will find an expandable section titled "ðŸ“„ Application Logs."
2.  **Operation**: Click this section to expand it and view real-time application log messages. Logs display the most recent events at the top.
3.  **Clear Logs**: Within this section, there is also a "Clear Log Records" button that clears the logs currently displayed in the interface. This does not affect server console log output.

### Log Level

The default log level is `DEBUG`. This means very detailed application execution information is recorded, including function calls, variable states, API requests/responses, etc. This is highly beneficial for understanding the application's internal workings and quickly pinpointing issues.

### Purpose of Logs

These logs are primarily used for:
*   Developers to debug the application.
*   Providing detailed execution context when encountering unexpected behavior or errors.
*   Helping to understand data processing and API interaction flows.

---
### Appendix A: Securely Setting Your Gemini API Key (Recommended)

To use your API Key more securely and persistently, it is recommended to use Colab's **Secrets Manager**:
1.  **Add Secret in Colab:** Click the key icon (ðŸ”‘) on the left sidebar -> "+ Add a new secret" -> Name: `GEMINI_API_KEY` -> Paste your key value -> Enable "Notebook access."
2.  **Application's Reading Logic**: The application, through logic in `utils/session_state_manager.py` (or similar, handled within `app.py` or the notebook environment), will preferentially attempt to read the key named `GEMINI_API_KEY` from Colab Secrets. If you've set it this way, you might not need to enter it manually in the UI.

---
